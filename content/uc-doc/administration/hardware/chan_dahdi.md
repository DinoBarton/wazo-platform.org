---
title: Enabling Chan Dahdi
---

`chan_dahdi` is not enabled on a normal UC engine installation. This page describes the steps that
are required to enable that functionality within Asterisk

## Install the required dependencies

The required dependencies to use dahdi are not installed on a UC engine at the moment of the
installation. If you wish to use dahdi on your system you will have to install the
`wazo-asterisk-extra-modules` package which depends on many shared libraries that are not used by
the default Wazo configuration:

```shell
apt update
apt install wazo-asterisk-extra-modules
```

## Add `chan_dahdi.so` to `/etc/asterisk/modules.conf` {#add-chan-dahdi-to-asterisk-modules}

The `modules.conf` file is auto-generated by wazo-confgend. To add `chan_dahdi.so`, the
`modules.conf` file use the following commands:

```shell
echo<<EOF >/etc/wazo-confgend/conf.d/chan_dahdi.yml
enabled_asterisk_modules:
  chan_dahdi.so: true
EOF
systemctl restart wazo-confgend.service
```

## Auto-update packages with wazo-upgrade {#dahdi-upgrade}

To always have the latest `dahdi-linux-modules-<kernel>` package, you can add the following script
into `/usr/share/wazo-upgrade/pre-start.d/` directory.

`upgrade-dahdi-linux-modules.sh`:

```bash
#!/bin/bash
set -e
set -u  # fail if variable is undefined
set -o pipefail  # fail if command before pipe fails

kernel_release=$(ls /lib/modules/ | grep "^4.19")
for kernel in $kernel_release; do
	apt-get install -o Dpkg::Options::="--force-confnew" -y dahdi-linux-modules-${kernel}
done
```

**Note**: Do not forget to make it executable: `chmod +x upgrade-dahdi-linux-modules.sh`
