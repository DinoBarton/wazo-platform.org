- secret:
    name: algolia
    data:
      appId: !encrypted/pkcs1-oaep
        - OcEPtfepFe9aBF+OKbJq2T3EK0QVMniMONJ86HNgZDCJGe24EoH1MjVUBX8e84YYW1eXd
          ZStstuoD6s9rwnTscYqLjcMQa0miUTbvi1aTrivSisVJlhzixziOtooU7G/TWl5tJEIUF
          Ox8tTQ73B9YWQmKfUGaDPNsvhPiPv9wNkBbdLjOvOCqHzF9UXLowfNNaqbQkusmnpB5eX
          EpHRHD3X53Yr2FTTM8d5VmTob0KKgMzjQK40xQrnssVT8/YZH5o03dKSXON3ImHhprXYa
          qsx7aGBxyU5NqrUHj8Rf/aV2b93YAW5Rxe40ocoAerJdGkxkBm1+um2/MEbgYSt3c06al
          Ta83nwCPWlEFwZFQ7vg9bejU6sis/7fbgQNJUkCxs3bH2qxiL4lE7UOcXi4MN4Vf55ha+
          8Y5bilJ5lf3n0LdaWdBcTHNsWAwB3+/uYKD4vavTB8u9PU2hMppaxA+VZkYT08F5/f+LX
          YKmaKAMepwIEvwJVYYe8IBXLBqxrHjUa0RTFXJlsBH/z6dPbnlYmpktAuwFGrm2eyjJx/
          I7itiwY30Xk/agZlNGDO+LA5rg5GRC8pMgodpJsmfJEdrOpIPkrOp7LaRJNRUqkSCRWlj
          A3MXpaiSHqfBgXoHnOmuzEafheJAXfR0R0/K3bw4tiob8l89S8170UYx7+U7w8=
      apiKey: !encrypted/pkcs1-oaep
        - XYd6ADcvHBNqBiZ+fES7bZXHzKHCm5CdJba6YGETKysBmmE7VzM1FLeilShHUeeMbSHjc
          8U12EcpFKY0iTPznlZsjOkrBXcnR3V/DgwMk+UZIJtQ7je5WgohyB1rvYtnMYHDfoBNKZ
          fL0EcMycyatFnfUueeBvYykHciEyiyiTEfHZnzW/+QBBGi0JQmolxMUXsi6PtGG4j6UFw
          qQLyVgqtsCeMReUHps8fJ420pOF4LvM6sSINMTAaj+6QflGgK3BdFUoA8suyeRch9nhYn
          3OSeibOsk9BxcryXoqW4umZn8R01/9J2P7xdS+2D/G9TttYJVXM3DQKTebsVIQcf07CQ9
          8hd19lHMKoUryhjJ8uSPVVMTsKeHTk7a+J8yTQSE3TOj3ic9DO7r5nJpQBVAHVfEP8nH9
          /dTo3YcK1/lL8UkHRKiF8Y+/UifX+Z/VrjzCEJ/rHtXfV+BKVD0WNyTgmnrq0fJY4eHXg
          zQdAsWOP6obIPnfzZvdn/sM0CMG9tFYiUb09gooli+qXohW2bEdu64xaM/bbuSlG2l7mX
          PdB1PGujKbBDhQeNNbKuVJ0Ay0Ga7h08d8ezNXvmhgVkc+gr9Hws2r0H53f5BrG9x0svv
          gs6G9DOWXHC4B2EePXz+3oYDL1oVlQD5K3xontPH4O2cRyncoYwm0BdQlztVC0=
      publicKey: !encrypted/pkcs1-oaep
        - o2ZN/zjPRD8Bj/cDO5KzccQxBHCKkqCKB+xMKQ/16wc2UO2RVqIoRAOC+v+gjLof0nBqs
          F9DtKlsIN0kiN+WTZg3AhW55cWv7L4MDoyeE7Je0XCxiGwQ3hfFGgmppwvGOBZn3XeMAO
          R9NXrUFstAYKN2dl+JYyn4r705eyGkNiVvEuN5tj88lbRV+LFnFHhNMQaNupQIhaS9ckl
          +iCGJLV1NjW1EonYqftux0jCMLKI2jBJpUzMJalP3xWu6X5m3ZryN27206UXtTwJmnCcf
          163WXEEyTVmrsJojEmjnf/JlSJ0dNJUKFSsWiWnbCQBPLPVLfH/3ZM0stiEVBFr3KrTJO
          2erEmffegoHlcbzXRnHx+Uh1Y9zpcsup1kJiCV/SBGvSNF8BaOwM/FtVbmxHnNTyDdhqK
          iFlUhNwABhxfY8k0WBbZdgtqbgHiHfkQmUUgQymG6y3OzBzOpnbMzOG9SboyfKtA9kQQW
          jjs4p0VGY+czRG2tjeO7c9/28hk1B597c9Zm6XA4txjX663nNrCWPzUGhIqfrb8Y1/eD+
          KsoCdmDPALrY56vYf/6KWAkB2RPK9GyHMVlL2EiBjzWCsEP2/5jfcmpvybKyraJayO2ZT
          lokMlFToEZxqUGrQCoF5FlB2Ztb5i6tN+sYuNS0yGbgD9Sz3ZDOXJJJmhdAWuU=
- secret:
    name: publication
    data:
      private_key: !encrypted/pkcs1-oaep
        - cC+wGTXktQ97KMy2h8Evre+AuRFRFfCz/QuIR3U5KLNvziIFTqlhr0Y2PNFcxhbyu+PzZ
          yRgW0aN9gyZRqxrU+eEVkZ4Mge406Bhp3eKYC8nzH6JN6AapLvQ0tmyGAk8W0K+JZ+yI9
          /Rqhk9SYna2j60AMa/rPjdChKDpJLoAw8XQYR3xgmA2YkA59713BKftC7/ZsE0j/oSrrz
          ymUjE/BWaTbj7zlryIhVck70VaJk8Ojqcg+gZhN3q7XcN/smTLTUTv8BLRy2diAT0zrvV
          vLtnjs4qh7fakaoi1U8TI99MKtpMhjMKf8CRcLpM/A9puZm0Rrg56NVfE/goMOY+NLQl5
          hUskuYCZ7a6W7+tiFg4vdNBvhyd6BXedcaBLAhORzPKZhRcfK3HBPwJ9Sxx680bzOxuAC
          bg+gXYbFXXThgRT6fRAx8hRr/XnY6XzpriuuqWGeJ1tqGAeT68o5xyEZakkb8a6ym2hxb
          515hjX3r2PpG1LRmJMZfb/pswIZBjj0sWuSFlMo87o+xQrKuk60jyT15Ec6WUXZcbnKw9
          ZnOHDoJgvzgFMiiMGGNynXRlUN/gk+2CLRgjQRXN17M567izsWjzH2dOd3OJippdiiIka
          8xjqkPyEwA0o3rI3EHjD1jOxsVIzr53Z6/bMGC2BXdQRLftmfvqHehHgJcdIdI=

- job:
    name: yarn-build-copy
    description: Build and copy
    pre-run: zuul.d/pre.yaml
    run: zuul.d/run-copy.yaml

- job:
    name: yarn-build-search-copy
    description: Build with search and copy
    pre-run: zuul.d/pre.yaml
    run: zuul.d/run-search-copy.yaml
    secrets:
      - name: algolia
        secret: algolia

- job:
    name: yarn-build-publish
    description: Build with search and publish
    pre-run: zuul.d/pre.yaml
    run: zuul.d/run.yaml
    secrets:
      - name: algolia
        secret: algolia

- job:
    name: yarn-build-test
    description: Build and publish
    pre-run: zuul.d/pre.yaml
    run: zuul.d/run-test.yaml

- project:
    check:
      jobs:
        - yarn-build-copy:
            nodeset: vm-debian-10-m1s
    gate:
      jobs:
        - yarn-build-search-copy:
            nodeset: vm-debian-10-m1s
    auto-merge:
      jobs:
        - yarn-build-search-copy:
            nodeset: vm-debian-10-m1s
    post:
      jobs:
        - yarn-build-publish:
            nodeset: vm-debian-10-m1s
    experimental:
      jobs:
        - yarn-build-test:
            nodeset: vm-debian-10-m1s
    periodic:
      jobs:
        - yarn-build-test:
            nodeset: vm-debian-10-m1s
