- secret:
    name: algolia
    data:
      appId: !encrypted/pkcs1-oaep
        - WyxKiDkoyyLzwDrHGcC/gn9EquFbRV0kZAxnrxtbJ6+9KNbu9Q+F0cIJP9v2eUBQMmdsL
          0CXY0Zvx4EHYyw7nUYLe1hhSlpaUgMjkrUewQmvcinZCir9HvlKLAU7eYpZrtE5hzVSe1
          pI+ZQ6cIPhN9Jc1o5HOV/grOIQC3ic/C80y6x1ifa+xFo9FmZ7fFPlWn36jRuPMl1pg/4
          LVmPzWa86wy30tG8LaY491AIjWoJSbtQBn3rEYZC5fT1x8ZpWsgFuZAsFT+KjGdU4G+e2
          LantDQ7gTnr4VHDKLGF0Gd2tck1gx1rbpUWXVMy2a+6dnouO8ZSYYbkcII8kN54VP57ek
          Morhc6/VO5XUJfNSEGOquwBqUsQNR2L3Trcj4KG2Q4WngOW3u9U2ffCpVPbEYEf6pd2XP
          J/Z6fbTtFThjWQ1F3WQyfLHfsAbYuKEyB1tLq6wk90e208wP/dgBoMfdHTvFF0FEdGhCd
          e/2HmWwftuhwA2fbaMq22/+CIsKhALtHsgdV6reuItxK3JrW4ZFhmcrCV5u8mYQ8fzLfQ
          JTyJxTYrHVuzeBXQ4cq+TtS4z1zMtDcCfwIb83jhBw6Gg2mKrR//5JnxFhyrxsQU+Zz7d
          oI1Yc3c1nUpbaFWOyF73Qed7mGj/qRtL1a3VEGTB9ly+Oo7LTAg1Spp3TCtfDI=
      apiKey: !encrypted/pkcs1-oaep
        - RLxy8znRp1xJTF1CbVs7N5BGrtJACKKWrMdfzJUJX+cznsrlvNb6/PbiJ9QCZNG1f8SGZ
          DZVawxGTtAmyL8ksSVdtTpFfB2wravRZcmelF/c7eAAEMKHEeW3vXQ/iyzrQgyJkkuUuQ
          IR0yrWejYP5cUKCIn37QBBkQnmfMAcK/fU0ZwrTCWbMfEk7QedXdbYildNVW1l8ASDR7w
          kYE7MmArpfj1rcuY3hnlEBbIuDx8V6yibemF3ACor2gZND+uBYObNcJ/l8cSgFIV+1Ve1
          ns57K2j6SqR5UtYnfPYJ0Nmk3Bc7n1Jc4r9J9hISZRb8xblFHJmwn/nmhNJvqNnHX2q6O
          xJaZSErhxOP7RK+VAV27SUewQTZbegJJXywAmdxENAovD00w80GBg80/YxhEASUKNQEKE
          FqTavvkqNmVLQrImPUW49dTC60D7gowinOESkXninUjFsRY9qHRP9Cf41/So44B9SDwbf
          OHk2T2+Ak+LrVY9eu8AFVIr9ALqrRCX1nl/5eU7fLMBJJbwS9TOJ4OPLE/1yR44W99HLU
          iP5gngFtVXUXVRAy5BiFYfqzb8vaUW6/x7UPAzdAd/sr42jQbuji2xP2qoBs/ZYH7XCLu
          gn1AWhYW8LRNzX3IdLUV50h3di6z/TaF0OVTQBm1p9ICBIHEgp0qQu/fv+yPWA=
      publicKey: !encrypted/pkcs1-oaep
        - g0Us9Q7H5FQa+SJS+m3BdhpGAnLtlKXB9U7b2VJlXzuwbk6bAQ+Ndst0tHpdX5UIBpp+O
          sOTniblyD3CHAyvNEREaYt7OBy7pvjBI5GYemAfLhP12qQCTuIsiCrpb3ECULfT29cyWU
          xAiGCPbUPjbiXaeRBEv2KLKMhgPw+k3RAwhpn0JuzA+u8ATCd7hgTXPubdu2lf1q7aM2k
          Y2jyleFTt7RotCM7VRzIbE4N4NIHjoGo8EHVWjAp16fuRa/Z2VBwRUK+NKq1FVdjZILGB
          lFB/xMMhaZxA6e0HyJz0Aa6ooZna4V0K5DTvWlGI+H56VsumE0WiL4gSadPOq17SwNX7g
          owE8/7sde6bEi1Za/f16IcqXhfygvdyn4EZavb33Fqgdt4L7I5SpJ+JOeFbUXjKjG2sn8
          CWJkTqIsm0MsvlhudQxbCSJprFirwCAkcma5kT3YUqiauHxWp5AcHeSEf/krzukE/XRSF
          LoGsmzrQWFTUInbMpd2B20NLbq9ouYaA9uEolv5zxT0t6ITsGC54HcpM99yM1kpOMH8mA
          ELE9ngT3ngseTxMdwTQvo44Vqj/OOZ+INNIoKPQtwKWA0Gz+yRLSGlAyORXflqUujOMMw
          q6ZSIOYpN5rOO+8LFS1CyBryADY75PgZOTUXtLj1d/t6VZrbImOcO77htk/hWs=
- secret:
    name: publication
    data:
      private_key: !encrypted/pkcs1-oaep
        - b9gq9L3VdOUiv3bS8TakPExgZOi5dULn9t+uT3Nc8jJPlCLDud1zx2G7pSxDtZzoQLlqq
          5gCp4vZIt/68HhfKQeVoiqhUyr51UUoKKm4gZyrmFZd0ONTfEv00KDRFhYs/W/fRmGBiY
          kyrF4ZtQvsCHEcVPF4p6u4/vYwRnxT05VRsNe+IuOJEHifzpkUPyv1D9L2tUoyS4lhNrM
          KyRtDclXdy4ua3i633kecXFzV9b7sLl2DtBamKwtAtmj7tdMwlTH8xB7j7nhrWNhlnIdo
          d74l2CAn4OtRzkAi08kJ9YIfxG3TyoamfUE7k6GtsZ4mXanVz3ki2AwzHYzP0kKDhNith
          t8CE7d2OQR/cI2lu3oMAJavYIwr6Q/NM3cQAjU7D/B0zqOe0nJLKv2+0Xij+fV1/Fi9ZW
          s+svbZxC2tN/oBq2yuF19tDtCo9PDY7S/ZdC7R5pmnRtn5rF/EPocc3wSLxEOtf4Mmjsj
          7csbDYTqCF+DzIwqEQlGlz84Lgct4rmyP8HMM9ZXJybPiNyfaOfqhLEXNEYlxF0N4i5/C
          madwYqcQe56GzKt8zDwV/jd5ln2uXehHKWqiLLJG4lf3xns0qwSUVG1jXKFfIPbv1MYI7
          Ni8eP70WPJv8gTeJmBEaDDCJ9lKIcwnvYiEFkoSBtptJLSJj2HsTGZbkSEwlt4=
- secret:
    name: mattermost
    data:
      api_key: !encrypted/pkcs1-oaep
        - Hafw7OtBf8uiKxOrvGY3xWLSggapuXmyYEnDmVTvS59OQgeDPdO6ze4nqeTNqz1wAwCud
          RABGw5g5I38A2Feo1ovbPkJ3tttBzhMDSvIgN+rB2Faxg3ESbHyI37DEcPcbV8LEWQD0E
          k+2vc4M5Zf5tpNy9uO9dUX1n3XjSn6D37ZST4jTUYOmK85l7rxILYYNpyeGIu8c5ydKR7
          C/3joFxWA2VuJsHGPq8RyyOvJtNCHWyHx1THOu9SFX+J0a4cZErjQ9bpLVos3U8OHmnoW
          pwqTRHXO0xWilM3t42jFr8lN9m4p9ALSwX481ZP0qpWO6ONUtDUheGlcXSBvtGgYd928j
          E4BbLFYo7j3035VA/UkohGRDFiPaCG1XWOtVsM/trufxJfq2HABU7WJ5I3+Mnglrc6IEp
          uQY8DqQqVExGpErcmIZ3/ixlfTq043DebB/mT63rpkYkzhy35J76zilP4qtWzJJlfg6bK
          i0xmrImMXP7SBH9rNePmaACltNexOO7VbCxuNmk09oY5tb4uQZFsnNVyaKhb2W8kFZdEg
          5GRFwwWLU3K5SidynCKDvi+R8+lU3wwsxFVQdxgG5uuv7AYNBFeJK7E9NtDJMQd8Vt/9a
          RBIb0c6ofuUmjbNe283LN3/Q8JXAimTlcbeYi3Aff+ZlPiPHVJmOhIZiIc2lO8=

- job:
    name: yarn-build-copy
    description: Build and copy
    run: zuul.d/run-copy.yaml

- job:
    name: yarn-build-search-copy
    description: Build with search and copy
    run: zuul.d/run-search-copy.yaml
    secrets:
      - name: algolia
        secret: algolia

- job:
    name: yarn-build-publish
    description: Build with search and publish
    run: zuul.d/run.yaml
    secrets:
      - name: algolia
        secret: algolia
      - name: publication
        secret: publication

- job:
    name: yarn-build-test
    description: Build and test
    run: zuul.d/run-test.yaml
    post-run: zuul.d/notification.yml
    timeout: 10800
    secrets:
      - name: mattermost
        secret: mattermost

- project:
    check:
      jobs:
        - yarn-build-copy:
            nodeset: vm-debian-10-m1s
    gate:
      jobs:
        - yarn-build-search-copy:
            nodeset: vm-debian-10-m1s
    auto-merge:
      jobs:
        - yarn-build-search-copy:
            nodeset: vm-debian-10-m1s
    post:
      jobs:
        - yarn-build-publish:
            nodeset: vm-debian-10-m1s
    periodic:
      jobs:
        - yarn-build-test:
            nodeset: vm-debian-10-m1s
