- secret:
    name: algolia
    data:
      appId: !encrypted/pkcs1-oaep
        - WQiDViEEvxjI7Zaqt4PLh6MjZrQ7dOXCYGr68jWte8iwd7M7HHlvaIF/Hcb1NpoiZGuMC
          HWb42wGZLSb/ndYBg8XOiE38fpf4ynEzHVQeU4/isK6dEHRT9lvuTNh0BVz+vPaN+6yL4
          S/FJVGf4IKn/Gjf4EKnrp4AQR1aiAsCRUOXG0H1buTcWV5obMBUgl6/scW0TsI+2xsgSn
          rA8EwLHE+WK+GyJiLOCP6dJm6FUB1sunc3xw5W+wFAZUGfpU4LGHzrBDf6N3CV16dOa5E
          p493lg48sUPm/PcIJ29BLwL13sVOpcPUeqik1p+7AATtiBmifJXxXF+UEMHXJQDQOxyGk
          3RpcUOmSqPCOQ/qB5L/Lf40rimj0Uc0A+yu9XdfBEumeo1Ba1d0c3Dh5Z+t0piLqdwsk4
          JEx9SqFN/ZQYawOiwh7wxsoPT0emGRY+HuGmR5OBse1K4IoCMTmOgOHg9ve6tljl7V9E6
          uDExSLGob0msHhrmzuG6/W/AHnXZLP9fpm6Bv4PFxjnI/Pkn3G6RitmoHz1OfFbdMjmK2
          pCfnCTyr/RgfPrq7GrIOiThk0F32TMTI9tbDPo4zj8JiGkHuGMjY4OSslsgS4kZJ51ZMy
          IT5I9ly4XHGTKhTCew5ApXtw5DVy0HviKZUatQveZi2nniWL7zjMRETxqBSYFY=
      apiKey: !encrypted/pkcs1-oaep
        - HjGVGLM1F8MilL4M9oV26WSKPn9ZMos6QFQ4t5nQbuLd2I+2wl2u2T3A1nT7ONIW89386
          3Qd6e/J44j643tGFmnOKt7Yx9JHOqEW5NAdm2Lz00AgviMVNJL35DvMPBY4nZECD/cZQx
          OjxYz9USADd9RS7kIqTQyd1745w9l1Bl59kvfPidlI4e+OQifQfdwr+RqtcnJB6dq15dV
          LE6lj0C0qyBFEu/+BggQojFe6NGBQDFFm6FxgHxowPQTdlGbQir5xaPNK+PaVrMWpB/RI
          AfvcWE2DDFy5G7u+F3rnFKBQd89Jm3kWTWMqhZ8lcEtwx3jTW5rUNHamBcbCohImtZBY/
          aZWLLOJ7I4F9DVC+ZlWEr0iT/RzgmO9xsl9PJ/QZUGDuMksc2DKyMZCoK1+X6+t2fYr7k
          tLBB+DA2d/eczK1Y7ujREbNiyR58m7W9ymTGK+Q7G9+o4dckJHzWXUODtaH80Cn3d4aae
          s1QTBUTjs0xNcxW6eUsX5AH37+A+5CsB1z1MwPqwA1brC06QlTAmMX9kCPVkcz18tLW65
          iYLbyeBqcv/Sf7JEUk07DQfT+6J9xsjb1u77wCDmqcfRMrwcajdmCjLhe22yhAB1LLmSk
          mm0MBVZdi8mYMKaSOX7ZmwaYJ1sb7eOXf5pz7FrMdwCJBwrCR1qAq1jrO3xxog=
      publicKey: !encrypted/pkcs1-oaep
        - mRhtuLnMN0Uj1Ugs02WPUBSwavURG/I223u5aNj/VfDsLuNjNnAXpnYIxhh0YqSlNWkS0
          8FJO0xJZXDl2P5hmcrVH0K3Ffhb/31OvsMtelarvm0FibZJ1d+Ed00bQ2XHoXaABAngey
          Ri1OxNbKTOqLGpUnYpre7WUOmoiEilIVgl6J6PKCTLhUMLJzRLFYivowV0IsMCbT0Weso
          YIJu6onW6eZNcpMOA4b+IGwHAWt+LBWu4pi06RAORfdMpKwFplwJUXcq8/Jr1Qbb/0Eea
          Lc+idQWkv9ypCtKX5KetaYeozPMt88Evwrfn6bKFzOhBfzthvsBeXPOxH1e1+p3S89K8S
          3efWcLRSB+HI5tB4GosSh8wTvnrP8H0thAO3ge2COpm5biYZHwoB5o4AoA0WSap+YWKOq
          XlOjc7wy1TF0nCLeKWT/7ZIjIrA34ryG10yFtjJoHEQoxBAQwvvAEOHIQWHC9tMXvNHgN
          HCbwdOhuChSCQhuC/nWjeqG6ljcBzhf7OQjRL/fM04ysbl+a2FQNi8jYw1HdC7uPHRKsa
          yOJRENKcPVRYJfko+gjbDLSc9GThCnRIXOUQM11F/qOvk0xCBmnI9qhOs6G0COQN1xsbD
          qUTLoQg660tQg3GSYEstmjMGrELxf/HRpctRX8OpkgSxIgiht0v82QIhCx1i0E=

- secret:
    name: publication
    data:
      private_key: !encrypted/pkcs1-oaep
        - CUFM7KbTRc4NCsi+tSTBJkqdse7qm4Crd5Rtww6zt+ux4S3ccRlcOZsQ8rN7vKlT5lPOI
          WwDFJy6fknU1hKGqDDwRYQNe3PO1DVFz/Ho39IDnHVg8Qif+gR+Md8zQOCCK4GXvFPcoS
          3HNhmO5Mb4MuBb6StdzFP4kouu/avIBYMxMXmECF28ObO1G+CM0GUOVl3mespl/XsDhqT
          dSGq1H1nDTFp7u8LurnTLzouaif81FmB0Lu4tppFBDPSwRjCFtoXDBafikR/aigX/lSKR
          UE75G/7MxuUV36mUIcVWnzYc5YXjHSdApvXFk8TAIah2imw53ek77s0//d6GEDS5qKEmR
          MGQB0kEgmjHiDMwV9uAQGjcitkk0ERJV1HF4FzfY9f0ySDHJWAjFTY/DkobEGWkn5HVVN
          n5ubVUGvN3E0wUEMScV9mTq+GitZ25Kz5X369q5iA6mGhziMj4EYuLZBAUuf4hdJjmO2S
          sYDtEYVNEMlFNLc/ZSL/2hnmdsPonCacgPIcaP9IJLY5mg6VKVmppCaTEqHGGkUBPzqGS
          Mk/h24GjLCpLb3VuN8lK56FWIDw7+01Sm3iBczzvahjfQNmz6zXiHw8sM2DQcadZPX2RV
          lMe/d6Wr3fvmPIZtDi55deCLffn42fc+AQeqFMKnG1ex1dzD7c9GVvDS4I2+KM=

- secret:
    name: mattermost
    data:
      api_key: !encrypted/pkcs1-oaep
        - yl14QOjD2G+i3xfuZK5YI+rgir9CX04B7TiJVjIpD/31r5VbLFWKxtFOdUVHmEJOMmx6t
          dN0mcNfUyh69Hr78LrRBatTSbuATyJOblTgWElhwz9gzoJmzERLdvFZRzG+DI7HfLQWg3
          a3OZDVXfKqTPpv/Op+yOSE7mU7larq8y3FYGo5qvNWuY3g3gg05Ohf7ZNnKHrSV8J+H28
          46KMu/71Ar+sUrF8IXKs4R7uRY7yNU+fZKwkAc7zIED9oA09YK3vm2R5fWpiQ+cR/MHkw
          GYBEZg2jK86+vmgs6kTT0qxw8gO4E1NwWH5VBGxhkEFyK+Yo/Av2JX+ftl/5nuA5yPH61
          QnU6iWd/mlSCNAwhZuITzFA4map92rHShctsHM7foQrpAB4LaN5kCfBcSmUGIqVVP+Wld
          f4+UfpSNHqXNFHWmA7bPc64Ul1k4E3lgAoQvdmaMrWE2GjrGCBXHNRRp7ReitCwVS7Usd
          VrX5YV+1CI7932weG6Hh9o81vdzGyYV9NNtj2TpIzCefu7lezmOMvGkbAOHSYQaQxjZlR
          rwXEEKHR9jE/s1fQGDoIs2WGArPqacR+VSWy1t4dRciqZ7nTUOCJm8thV1zMx82ScDftF
          olOMAHn7EgTmgkdEDnGdY1AwsGspz+dpJ2YwilMb9TruqWkjKZWWmqNQ9TWlik=

- job:
    name: yarn-build-copy
    description: Build and copy
    run: zuul.d/run-copy.yaml

- job:
    name: yarn-build-search-copy
    description: Build with search and copy
    run: zuul.d/run-search-copy.yaml
    secrets:
      - name: algolia
        secret: algolia

- job:
    name: yarn-build-publish
    description: Build with search and publish
    run: zuul.d/run.yaml
    secrets:
      - name: algolia
        secret: algolia
      - name: publication
        secret: publication

- job:
    name: yarn-build-test
    description: Build and test
    run: zuul.d/run-test.yaml
    post-run: zuul.d/notification.yml
    timeout: 10800
    secrets:
      - name: mattermost
        secret: mattermost

- job:
    name: sduthil-debug
    run: zuul.d/debug.yaml
    timeout: 10800
    secrets:
      - name: publication
        secret: publication

- project:
    check:
      jobs:
        - sduthil-debug:
            nodeset: vm-debian-10-m1s
    gate:
      jobs:
        - yarn-build-search-copy:
            nodeset: vm-debian-10-m1s
    auto-merge:
      jobs:
        - noop
    post:
      jobs:
        - yarn-build-publish:
            nodeset: vm-debian-10-m1s
    periodic:
      jobs:
        - yarn-build-test:
            nodeset: vm-debian-10-m1s
